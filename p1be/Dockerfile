FROM openjdk:11-jre

ARG SPRING_DATASOURCE_URL
ARG SPRING_DATASOURCE_USERNAME
ARG SPRING_DATASOURCE_PASSWORD
ARG APP_ARCHIVIZATION_CONTAINERNAME
ARG APP_STORAGE_AZURECONNECTIONSTRING
ARG SERVER_PORT

RUN echo $SERVER_PORT
RUN echo $SPRING_DATASOURCE_USERNAME

ENV SPRING_DATASOURCE_URL=$SPRING_DATASOURCE_URL
ENV SPRING_DATASOURCE_USERNAME=$SPRING_DATASOURCE_USERNAME
ENV SPRING_DATASOURCE_PASSWORD=$SPRING_DATASOURCE_PASSWORD
ENV APP_ARCHIVIZATION_CONTAINERNAME=$APP_ARCHIVIZATION_CONTAINERNAME
ENV APP_STORAGE_AZURECONNECTIONSTRING=$APP_STORAGE_AZURECONNECTIONSTRING
ENV SERVER_PORT=$SERVER_PORT

RUN echo $SERVER_PORT
RUN echo $SPRING_DATASOURCE_USERNAME

EXPOSE $SERVER_PORT $SERVER_PORT

COPY target/p1be*.jar ./p1be.jar
ENTRYPOINT java -Duser.timezone=Europe/Warsaw -jar ./p1be.jar
